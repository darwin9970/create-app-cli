# Data Center Manager - AI 开发规则

## 技术栈

- **前端框架**: React 18 + TypeScript
- **UI 框架**: Ant Design Pro / UmiJS
- **状态管理**: Zustand
- **样式**: TailwindCSS + Less
- **构建工具**: UmiJS

## 代码规范

1. **完整输出** - 输出完整代码，禁止使用省略号或"代码过长不展示"
2. **持续执行** - 复杂任务尽量一次性完成，避免频繁中断
3. **TypeScript** - 所有代码必须使用 TypeScript，定义清晰的类型
4. **组件规范** - 使用函数式组件 + Hooks
5. **请求规范** - 所有 API 请求必须使用 ahooks 的 `useRequest`，禁止直接调用 service
6. **状态管理** - 全局状态必须使用 Zustand，遵循 selector 模式优化渲染
7. **Hooks 优先** - 优先使用现有自定义 Hooks，不满足需求时扩展或新建 Hooks

## 目录结构

```
src/
├── components/     # 公共组件
├── pages/          # 页面组件
├── services/       # API 服务
├── stores/         # Zustand stores
├── utils/          # 工具函数
├── hooks/          # 自定义 Hooks
└── types/          # 类型定义
```

## 开发原则

1. **复用优先** - 优先复用现有组件和工具函数
2. **最小改动** - 修改代码时保持最小影响范围
3. **类型安全** - 避免使用 any，定义明确的接口
4. **测试验证** - 修改后进行必要的测试验证

## 使用示例

### ahooks useRequest

```tsx
import { useRequest } from 'ahooks';
import { getUserList } from '@/services';

// 基础用法
const { data, loading, refresh } = useRequest(getUserList);

// 手动触发
const { run } = useRequest(getUserList, { manual: true });

// 带防抖
const { run } = useRequest(saveUser, { debounceWait: 300, manual: true });
```

### Zustand 状态管理

```tsx
// 组件内使用 selector 模式
const userInfo = useUserStore((state) => state.userInfo);
const clearUser = useUserStore((state) => state.clearUser);

// 非 React 上下文
const token = useUserStore.getState().userInfo?.token;
```

### 自定义 Hooks

```tsx
// useChart - ECharts 图表
const { chartRef } = useChart(options);
<div ref={chartRef} style={{ height: 400 }} />

// useDownload - 文件下载
const { loading, download } = useDownload(exportExcel);
await download({ id: 1 }, 'report.xlsx');

// useAppMessage - 全局消息
import { message, modal } from '@/hooks';
message.success('操作成功');
```